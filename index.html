<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quiz √în T·∫≠p Kh√¥ng D√¢y</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f2f2f2;
    }

    .question-box {
        background: #fff;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }

    .answers div {
        background: #e8e8e8;
        padding: 10px;
        margin: 6px 0;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.2s;
    }

    .correct-highlight {
        background: yellow;
    }

    .right {
        background: lightgreen !important;
    }

    .wrong {
        background: #ff6b6b !important;
    }
</style>
</head>
<body>

<h2>Quiz √în T·∫≠p </h2>
<p>Nh·∫•p v√†o ƒë√°p √°n ƒë·ªÉ ki·ªÉm tra ƒë√∫ng sai</p>

<div style="margin-bottom: 15px;">
  <button id="resetBtn" style="background: #2196F3; color: white; border: none; padding: 10px 15px; border-radius: 6px; cursor: pointer; font-size: 14px;">üîÑ L√†m M·ªõi</button>
</div>

<div id="quiz-container"></div>

<script src="question2.js"></script>

<script>
// Render c√¢u h·ªèi
function renderQuiz() {
    const container = document.getElementById("quiz-container");
    container.innerHTML = '';

    if (!Array.isArray(quizData) || quizData.length === 0) {
        container.innerHTML = "<p style='color:red;'>Kh√¥ng c√≥ d·ªØ li·ªáu c√¢u h·ªèi</p>";
        return;
    }

    quizData.forEach((q, index) => {
        const isMulti = Array.isArray(q.correctIndex) && q.correctIndex.length > 1;
        const needCount = isMulti ? q.correctIndex.length : 1;
        let html = `<div class="question-box"><b>C√¢u ${index+1}: ${q.question}</b>`;
        if (isMulti) html = `<div class="question-box"><b>C√¢u ${index+1}: ${q.question} <small style="color:#555"> (Ch·ªçn ${needCount} ƒë√°p √°n)</small></b>`;
        if (q.image) {
            html += `<div><img src="${q.image}" onerror="this.style.display='none'"></div>`;
        }
        html += `<div class="answers">`;
        q.answers.forEach((ans, idx) => {
            // x√°c ƒë·ªãnh ƒë√∫ng cho c·∫£ s·ªë nguy√™n ho·∫∑c m·∫£ng
            const isCorrect = Array.isArray(q.correctIndex) ? q.correctIndex.includes(idx) : q.correctIndex === idx;
            html += `<div data-qid="${q.id ?? index}" data-index="${idx}" data-correct="${isCorrect}">${ans}</div>`;
        });
        html += `</div></div>`;
        container.innerHTML += html;
    });

    // X·ª≠ l√Ω click: toggle ch·ªçn/hu·ª∑ ch·ªçn; n·∫øu ƒë√∫ng -> .right, sai -> .wrong
    document.querySelectorAll(".answers div").forEach(el => {
        el.addEventListener("click", function () {
            // n·∫øu ƒë√£ c√≥ tr·∫°ng th√°i th√¨ b·∫•m l·∫°i ƒë·ªÉ x√≥a
            if (this.classList.contains("right") || this.classList.contains("wrong")) {
                this.classList.remove("right", "wrong");
                return;
            }
            if (this.dataset.correct === "true") {
                this.classList.add("right");
            } else {
                this.classList.add("wrong");
            }
        });
    });
}

// N·∫øu quizData h·ª£p l·ªá, kh·ªüi t·∫°o displayData
if (typeof quizData !== 'undefined' && Array.isArray(quizData)) {
    // Hi·ªÉn th·ªã c√°c c√¢u h·ªèi theo th·ª© t·ª± t·ª´ id 1 ƒë·∫øn id 145
    // Kh√¥ng tr·ªôn, ch·ªâ s·∫Øp x·∫øp theo th·ª© t·ª± id
} else {
    quizData = []; // guard
}
renderQuiz();

// N√∫t l√†m m·ªõi (x√≥a t·∫•t c·∫£ l·ª±a ch·ªçn)
document.getElementById('resetBtn').addEventListener('click', function() {
    document.querySelectorAll(".answers div").forEach(el => {
        el.classList.remove("right", "wrong");
    });
});
</script>

</body>
</html>
